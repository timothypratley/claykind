<!DOCTYPE html>
<html><head><link href="style.css" rel="stylesheet" type="text/css"><script src="https://unpkg.com/react@18/umd/react.production.min.js" type="text/javascript"></script><script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" type="text/javascript"></script><script src="https://scicloj.github.io/scittle/js/scittle.js" type="text/javascript"></script><script src="https://scicloj.github.io/scittle/js/scittle.reagent.js" type="text/javascript"></script><script src="https://cdn.jsdelivr.net/npm/vega@5" type="text/javascript"></script><script src="https://cdn.jsdelivr.net/npm/vega-lite@5" type="text/javascript"></script><script src="https://cdn.jsdelivr.net/npm/vega-embed@6" type="text/javascript"></script><script src="portal-main.js" type="text/javascript"></script></head><body><script type="application/x-scittle">(ns main
            (:require [reagent.core :as r]
                      [reagent.dom :as dom]))</script><div><pre><code>(ns kindly.grammars
  (:require [clojure.java.io :as io]
            [malli.core :as ma])
  (:import (javax.imageio ImageIO)))</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector nil]]")}
                , document.currentScript.parentElement);</script></div></div><div></div><div></div><div></div><div></div><div></div><div><pre><code>(def hiccup-table
  ^:kindly/hiccup
  [:table
   [:tr [:td 1] [:td 2]]
   [:tr [:td 3] [:td 4]]])</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector \"#'kindly.grammars/hiccup-table\"]]")}
                , document.currentScript.parentElement);</script></div></div><div></div><div></div><div><pre><code>(def Hiccup
  [:schema {:registry {"hiccup" [:orn
                                 [:node [:catn
                                         [:name keyword?]
                                         [:props [:? [:map-of keyword? any?]]]
                                         [:children [:* [:schema [:ref "hiccup"]]]]]]
                                 [:primitive [:orn
                                              [:nil nil?]
                                              [:boolean boolean?]
                                              [:number number?]
                                              [:text string?]]]]}}
   "hiccup"])</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector \"#'kindly.grammars/Hiccup\"]]")}
                , document.currentScript.parentElement);</script></div></div><div></div><div><pre><code>(def parse-hiccup (ma/parser Hiccup))</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector \"#'kindly.grammars/parse-hiccup\"]]")}
                , document.currentScript.parentElement);</script></div></div><div><pre><code>(parse-hiccup hiccup-table)</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "[^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :node]] {^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :name]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :table]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :props]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector nil]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :children]] [[^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :node]] {^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :name]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :tr]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :props]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector nil]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :children]] [[^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :node]] {^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :name]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :td]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :props]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector nil]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :children]] [[^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :primitive]] [^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :number]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector 1]]]]]}] [^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :node]] {^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :name]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :td]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :props]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector nil]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :children]] [[^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :primitive]] [^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :number]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector 2]]]]]}]]}] [^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :node]] {^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :name]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :tr]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :props]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector nil]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :children]] [[^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :node]] {^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :name]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :td]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :props]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector nil]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :children]] [[^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :primitive]] [^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :number]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector 3]]]]]}] [^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :node]] {^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :name]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :td]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :props]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector nil]], ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :children]] [[^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :primitive]] [^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :number]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector 4]]]]]}]]}]]}]")}
                , document.currentScript.parentElement);</script></div></div><div></div><div></div><div><pre><code>^:kind/table
{:headers     []
 :row-vectors []}</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div [:p \"unimplemented kind\" [:code \":kind/table\"]] [:portal.viewer/inspector ^#:kind{:table true} {:headers [], :row-vectors []}]]")}
                , document.currentScript.parentElement);</script></div></div><div><pre><code>^:kind/table
{:headers     []
 :row-maps []}</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div [:p \"unimplemented kind\" [:code \":kind/table\"]] [:portal.viewer/inspector ^#:kind{:table true} {:row-maps [], :headers []}]]")}
                , document.currentScript.parentElement);</script></div></div><div><pre><code>^:kind/table
[[1 2]
 [3 4]]</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div [:p \"unimplemented kind\" [:code \":kind/table\"]] [:portal.viewer/inspector ^#:kind{:table true} [[1 2] [3 4]]]]")}
                , document.currentScript.parentElement);</script></div></div><div></div><div><pre><code>'(tabulate values)</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "(^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector tabulate]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector values]])")}
                , document.currentScript.parentElement);</script></div></div><div><pre><code>'(tabulate headers values)</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "(^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector tabulate]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector headers]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector values]])")}
                , document.currentScript.parentElement);</script></div></div><div></div><div></div><div><pre><code>(def Table
  [:schema {:registry {"table" ['...]}}
   "table"])</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector \"#'kindly.grammars/Table\"]]")}
                , document.currentScript.parentElement);</script></div></div><div></div><div></div><div><pre><code>(defn vega-lite-point-plot [data]
  ^:kind/vega-lite
  {:data {:values data},
   :mark "point"
   :encoding
   {:size {:field "w" :type "quantitative"}
    :x    {:field "x", :type "quantitative"},
    :y    {:field "y", :type "quantitative"},
    :fill {:field "z", :type "nominal"}}})</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector \"#'kindly.grammars/vega-lite-point-plot\"]]")}
                , document.currentScript.parentElement);</script></div></div><div><pre><code>(defn random-data [n]
  (->> (repeatedly n #(- (rand) 0.5))
       (reductions +)
       (map-indexed (fn [x y]
                      {:w (rand-int 9)
                       :z (rand-int 9)
                       :x x
                       :y y}))))</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector \"#'kindly.grammars/random-data\"]]")}
                , document.currentScript.parentElement);</script></div></div><div><pre><code>(defn random-vega-lite-plot [n]
  (-> n
      random-data
      vega-lite-point-plot))</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector \"#'kindly.grammars/random-vega-lite-plot\"]]")}
                , document.currentScript.parentElement);</script></div></div><div><pre><code>^:kind/vega-lite
(random-vega-lite-plot 9)</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:portal.viewer/vega-lite ^#:kind{:vega-lite true} {:encoding {:y {:field \"y\", :type \"quantitative\"}, :fill {:field \"z\", :type \"nominal\"}, :size {:field \"w\", :type \"quantitative\"}, :x {:field \"x\", :type \"quantitative\"}}, :mark \"point\", :data {:values ({:y -0.23870171446962463, :w 2, :z 2, :x 0} {:y -0.6375279841272652, :w 2, :z 5, :x 1} {:y -0.16152245642553376, :w 2, :z 2, :x 2} {:y 0.09054289833566298, :w 3, :z 6, :x 3} {:y -0.28753808836172534, :w 4, :z 7, :x 4} {:y -0.6183020237404696, :w 6, :z 6, :x 5} {:y -0.8611185395855587, :w 6, :z 1, :x 6} {:y -0.8615222842198386, :w 5, :z 7, :x 7} {:y -1.0686819958488156, :w 8, :z 0, :x 8})}}]")}
                , document.currentScript.parentElement);</script></div></div><div></div><div></div><div></div><div></div><div></div><div><pre><code>(ImageIO/read (io/file "claykind.png"))</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "#object[\"[B\" 0x625ae6d \"[B@625ae6d\"]")}
                , document.currentScript.parentElement);</script></div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div><pre><code>^:kindly/markdown
(str "## This... is... " :Markdown)</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector \"## This... is... :Markdown\"]]")}
                , document.currentScript.parentElement);</script></div></div><div></div><div></div><div><pre><code>{:this #{"is"}
 'data [1 2 3 nil]}</code></pre><div><script>portal.extensions.vs_code_notebook.activate().renderOutputItem(
                {"mime": "x-application/edn",
                 "text": (() => "{^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector :this]] #{^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector \"is\"]]}, ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector data]] [^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector 1]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector 2]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector 3]] ^#:portal.viewer{:default :portal.viewer/hiccup} [:div nil [:portal.viewer/inspector nil]]]}")}
                , document.currentScript.parentElement);</script></div></div><div></div></body></html>